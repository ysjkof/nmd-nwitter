{"version":3,"sources":["fbase.js","components/AuthForm.js","routes/Auth.js","components/Nweet.js","components/NweetFactory.js","routes/Home.js","routes/Profile.js","components/Navigation.js","components/Router.js","components/App.js","styles/GlobalStyle.js","index.js"],"names":["app","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","authService","getAnalytics","getAuth","dbService","getFirestore","storageService","getStorage","Form","styled","form","Button","button","Error","span","AuthForm","useState","email","setEmail","password","setPassword","newAccount","setNewAccount","errorState","setErrorState","onChange","event","target","name","value","onSubmit","a","preventDefault","createUserWithEmailAndPassword","signInWithEmailAndPassword","message","type","placeholder","required","onClick","prev","Container","div","AnotherAuthForm","Auth","onSocialClick","provider","GoogleAuthProvider","signInWithPopup","result","credentialFromResult","GithubAuthProvider","console","error","icon","faGoogle","faGithub","Wrapper","props","isOwner","NweetContainer","NweetRow","BtnWrapper","Nweet","nweetObj","editing","setEditing","text","newNweet","setNewNweet","onDeleteClick","window","confirm","deleteDoc","doc","id","attachmentUrl","deleteObject","ref","toggleEditing","updateDoc","log","displayName","faTrash","faPencilAlt","alt","src","PreviewAttachment","NweetFactory","userObj","nweet","setNweet","attachment","setAttachment","attachmentRef","uid","v4","uploadString","response","getDownloadURL","createdAt","Date","now","creatorId","addDoc","collection","maxLength","htmlFor","className","faPlus","accept","theFile","files","reader","FileReader","onloadend","finishedEvent","currentTarget","readAsDataURL","style","display","OutWindow","Home","nweets","setNweets","useEffect","q","query","orderBy","onSnapshot","QuerySnapshot","newArray","docs","map","data","outWindow","document","getElementById","newScrollTop","scrollTopMax","scrollTop","onScroll","MyNweet","Profile","refreshUser","newDisplayName","setNewDisplayName","myNweets","setMyNweets","updateProfile","getMyNweets","where","getDocs","querySnapshot","forEach","push","Nav","nav","Ul","ul","Li","li","Navigation","history","useHistory","to","signOut","Main","main","AppRouter","isLoggedIn","exact","path","App","init","setInit","currentUser","setIsLoggedIn","setUserObject","onAuthStateChanged","user","GlobalStyle","createGlobalStyle","reset","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.dea925e7.chunk.js","sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGIN_ID,\n  appId: process.env.REACT_APP_APP_ID,\n  measurementId: process.env.REACT_APP_MEASUR_ID,\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n// eslint-disable-next-line\nconst analytics = getAnalytics(app);\n\nexport const authService = getAuth();\nexport const dbService = getFirestore();\nexport const storageService = getStorage();\n","import {\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n} from \"@firebase/auth\";\nimport { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { authService } from \"../fbase\";\n\nconst Form = styled.form`\n  display: flex;\n  flex-direction: column;\n  input {\n    padding: 10px 14px;\n  }\n  input:not(:last-child) {\n    margin-bottom: 14px;\n  }\n  input:last-child {\n    margin-bottom: 8px;\n    box-shadow: none;\n    cursor: pointer;\n  }\n`;\nconst Button = styled.button`\n  background: none;\n  cursor: pointer;\n  color: #d35400;\n  box-shadow: none;\n`;\nconst Error = styled.span`\n  color: red;\n  margin-bottom: 12px;\n`;\n\nconst AuthForm = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [newAccount, setNewAccount] = useState(false);\n  const [errorState, setErrorState] = useState(\"\");\n\n  const onChange = (event) => {\n    const {\n      target: { name, value },\n    } = event;\n    if (name === \"email\") {\n      setEmail(value);\n    } else if (name === \"password\") {\n      setPassword(value);\n    }\n  };\n  const onSubmit = async (event) => {\n    event.preventDefault();\n    try {\n      if (newAccount) {\n        await createUserWithEmailAndPassword(authService, email, password);\n      } else {\n        await signInWithEmailAndPassword(authService, email, password);\n      }\n    } catch (error) {\n      setErrorState(error.message);\n    }\n  };\n  const toggleAccount = () => setNewAccount((prev) => !prev);\n\n  return (\n    <>\n      <Form onSubmit={onSubmit}>\n        <input\n          name=\"email\"\n          type=\"text\"\n          placeholder=\"Email\"\n          required\n          value={email}\n          onChange={onChange}\n        />\n        <input\n          name=\"password\"\n          type=\"password\"\n          placeholder=\"Password\"\n          required\n          value={password}\n          onChange={onChange}\n        />\n        <Error>{errorState}</Error>\n        <input type=\"submit\" value={newAccount ? \"Create Account\" : \"Log In\"} />\n      </Form>\n      <Button onClick={toggleAccount}>\n        {newAccount ? \"Change to Sign In\" : \"Create Account\"}\n      </Button>\n    </>\n  );\n};\n\nexport default AuthForm;\n","import {\n  GithubAuthProvider,\n  GoogleAuthProvider,\n  signInWithPopup,\n} from \"@firebase/auth\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faGoogle, faGithub } from \"@fortawesome/free-brands-svg-icons\";\nimport styled from \"styled-components\";\nimport AuthForm from \"../components/AuthForm\";\nimport { authService } from \"../fbase\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n`;\n\nconst AnotherAuthForm = styled.div`\n  margin-top: 30px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  button {\n    width: 40%;\n  }\n`;\n\nconst Auth = () => {\n  const onSocialClick = async (event) => {\n    const {\n      target: { name },\n    } = event;\n    let provider;\n    try {\n      // 구글과 깃허브 email Id가 동일하다면 오류난다.\n      // Error (auth/account-exists-with-different-credential).\n      if (name === \"google\") {\n        provider = new GoogleAuthProvider();\n        const result = await signInWithPopup(authService, provider);\n        GoogleAuthProvider.credentialFromResult(result);\n      } else if (name === \"github\") {\n        provider = new GithubAuthProvider();\n        const result = await signInWithPopup(authService, provider);\n        GithubAuthProvider.credentialFromResult(result);\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <Container>\n      <AuthForm />\n      <AnotherAuthForm>\n        <button name=\"google\" onClick={onSocialClick}>\n          Sign In with Google\n          <FontAwesomeIcon icon={faGoogle} />\n        </button>\n        <button name=\"github\" onClick={onSocialClick}>\n          Sign In GitHub\n          <FontAwesomeIcon icon={faGithub} />\n        </button>\n      </AnotherAuthForm>\n    </Container>\n  );\n};\n\nexport default Auth;\n","import { deleteDoc, doc, getFirestore, updateDoc } from \"@firebase/firestore\";\nimport { deleteObject, ref } from \"@firebase/storage\";\nimport { faPencilAlt, faTrash } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { storageService } from \"../fbase\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: white;\n  border-radius: 8px;\n  padding: 4px 8px;\n  :not(:last-child) {\n    margin-bottom: 14px;\n  }\n  box-shadow: ${(props) => (props.isOwner ? \"0 0 3px 1px\" : \"0 0 1px\")};\n`;\n\nconst NweetContainer = styled.div`\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n`;\nconst NweetRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  color: #34495e;\n  img {\n    max-width: 30%;\n  }\n  :first-child {\n    font-size: 14px;\n    color: #7f8c8d;\n  }\n`;\nconst BtnWrapper = styled.div`\n  span:last-child {\n    margin-left: 25px;\n  }\n`;\n\nconst Nweet = ({ nweetObj, isOwner }) => {\n  const [editing, setEditing] = useState(false);\n  const [newNweet, setNewNweet] = useState(nweetObj.text);\n\n  const onDeleteClick = async () => {\n    const ok = window.confirm(\"Are you sure you want to delete this nweet?\");\n    if (ok) {\n      await deleteDoc(doc(getFirestore(), `nweets/${nweetObj.id}`));\n      if (nweetObj.attachmentUrl) {\n        await deleteObject(ref(storageService, nweetObj.attachmentUrl));\n      }\n    }\n  };\n\n  const toggleEditing = () => setEditing((prev) => !prev);\n\n  const onSubmit = async (event) => {\n    event.preventDefault();\n    await updateDoc(doc(getFirestore(), `nweets/${nweetObj.id}`), {\n      text: newNweet,\n    });\n    setEditing(false);\n  };\n\n  const onChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setNewNweet(value);\n  };\n  console.log(isOwner);\n\n  return (\n    <Wrapper isOwner={isOwner}>\n      {editing ? (\n        <>\n          <form onSubmit={onSubmit}>\n            <input\n              type=\"text\"\n              placeholder=\"Edit your nweet\"\n              value={newNweet}\n              required\n              onChange={onChange}\n            />\n            <input type=\"submit\" value=\"NWEET\" />\n          </form>\n          <button onClick={toggleEditing}>Cancel</button>\n        </>\n      ) : (\n        <>\n          <NweetContainer>\n            <NweetRow>\n              <h6>{nweetObj.displayName}</h6>\n              {isOwner && (\n                <BtnWrapper>\n                  <span onClick={onDeleteClick}>\n                    <FontAwesomeIcon icon={faTrash} />\n                  </span>\n                  <span onClick={toggleEditing}>\n                    <FontAwesomeIcon icon={faPencilAlt} />\n                  </span>\n                </BtnWrapper>\n              )}\n            </NweetRow>\n            <NweetRow>\n              <h4>{nweetObj.text}</h4>\n              {nweetObj.attachmentUrl && (\n                <img alt=\"\" src={nweetObj.attachmentUrl} />\n              )}\n            </NweetRow>\n          </NweetContainer>\n        </>\n      )}\n    </Wrapper>\n  );\n};\n\nexport default Nweet;\n","import { addDoc, collection } from \"@firebase/firestore\";\nimport { getDownloadURL, ref, uploadString } from \"@firebase/storage\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { v4 } from \"uuid\";\nimport { dbService, storageService } from \"../fbase\";\n\nconst Form = styled.form`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  input {\n    margin-bottom: 5px;\n    padding: 0 10px;\n    :first-child {\n      width: 100%;\n      padding: 10px;\n    }\n  }\n  label {\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 5px;\n    span {\n      margin-right: 10px;\n    }\n  }\n`;\nconst PreviewAttachment = styled.div`\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: 20%;\n  box-shadow: 0 0 10px;\n  img {\n    max-width: 350px;\n    max-height: 350px;\n    width: fit-content;\n    height: fit-content;\n  }\n  span {\n    position: absolute;\n    background-color: white;\n    border-radius: 8px;\n    padding: 2px;\n    font-size: 12px;\n    top: 10px;\n    left: 10px;\n    border: 1px solid red;\n    color: red;\n  }\n  button {\n    position: absolute;\n    bottom: 8px;\n    right: 8px;\n    color: red;\n    font-weight: 600;\n    border: 1px solid red;\n  }\n`;\n\nconst NweetFactory = ({ userObj }) => {\n  const [nweet, setNweet] = useState(\"\");\n  const [attachment, setAttachment] = useState(\"\");\n\n  const onSubmit = async (event) => {\n    event.preventDefault();\n    try {\n      let attachmentUrl = \"\";\n      if (attachment !== \"\") {\n        const attachmentRef = ref(storageService, `${userObj.uid}/${v4()}`);\n        const response = await uploadString(\n          attachmentRef,\n          attachment,\n          \"data_url\"\n        );\n        attachmentUrl = await getDownloadURL(response.ref);\n      }\n      const nweetObj = {\n        text: nweet,\n        createdAt: Date.now(),\n        creatorId: userObj.uid,\n        attachmentUrl,\n        displayName: userObj.displayName,\n      };\n      await addDoc(collection(dbService, \"nweets\"), nweetObj);\n    } catch (error) {\n      console.error(\"Error adding document: \", error);\n    }\n    setNweet(\"\");\n    setAttachment(\"\");\n  };\n\n  const onChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setNweet(value);\n  };\n  const onFileChange = (event) => {\n    const {\n      target: { files },\n    } = event;\n    const theFile = files[0];\n    const reader = new FileReader();\n    reader.onloadend = (finishedEvent) => {\n      const {\n        currentTarget: { result },\n      } = finishedEvent;\n      setAttachment(result);\n    };\n    reader.readAsDataURL(theFile);\n  };\n  const onClearAttachment = () => setAttachment(null);\n\n  return (\n    <Form onSubmit={onSubmit}>\n      <input\n        value={nweet}\n        onChange={onChange}\n        type=\"text\"\n        placeholder=\"What's on your mind?\"\n        maxLength={123}\n      />\n      <label htmlFor=\"attach-file\" className=\"factoryInput__label\">\n        <div>\n          <span>Add photos</span>\n          <FontAwesomeIcon icon={faPlus} />\n        </div>\n        <input type=\"submit\" value=\"SEND\" />\n      </label>\n      <input\n        id=\"attach-file\"\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={onFileChange}\n        style={{ display: \"none\" }}\n      />\n      {attachment ? (\n        <PreviewAttachment>\n          <span>Attached Image</span>\n          <img alt=\"\" src={attachment} />\n          <button onClick={onClearAttachment}>Clear</button>\n        </PreviewAttachment>\n      ) : null}\n    </Form>\n  );\n};\n\nexport default NweetFactory;\n","import { collection, onSnapshot, orderBy, query } from \"@firebase/firestore\";\nimport { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Nweet from \"../components/Nweet\";\nimport NweetFactory from \"../components/NweetFactory\";\nimport { dbService } from \"../fbase\";\n\nconst Wrapper = styled.div`\n  height: 100%;\n`;\nconst OutWindow = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 20px;\n  border: 1px solid;\n  padding: 10px;\n  border-radius: 8px;\n  height: 70vh;\n  width: 100%;\n  overflow-y: auto;\n  &:first-child {\n    margin-top: auto;\n  }\n`;\n\nconst Home = ({ userObj }) => {\n  const [nweets, setNweets] = useState([]);\n\n  useEffect(() => {\n    const q = query(collection(dbService, \"nweets\"), orderBy(\"createdAt\"));\n    onSnapshot(q, (QuerySnapshot) => {\n      const newArray = QuerySnapshot.docs.map((doc) => {\n        return { id: doc.id, ...doc.data() };\n      });\n      setNweets(newArray);\n    });\n    // return () => {\n    //   unsubscribe();\n    // };\n  }, []);\n  useEffect(function moveScrollBottom() {\n    const outWindow = document.getElementById(\"OutWindow\");\n    const newScrollTop = outWindow.scrollTopMax;\n    outWindow.scrollTop = newScrollTop;\n  });\n\n  const onScroll = (event) => {\n    // const outWindow = document.getElementById(\"OutWindow\");\n    // const scrollBottom = outWindow.scrollTopMax;\n    // const {\n    //   target: { scrollTop, scrollTopMax },\n    // } = event;\n  };\n\n  return (\n    <Wrapper>\n      <OutWindow onScroll={onScroll} id=\"OutWindow\">\n        {nweets.map((nweet) => (\n          <Nweet\n            key={nweet.id}\n            nweetObj={nweet}\n            isOwner={nweet.creatorId === userObj.uid}\n          />\n        ))}\n      </OutWindow>\n      <NweetFactory userObj={userObj} />\n    </Wrapper>\n  );\n};\n\nexport default Home;\n","import { updateProfile } from \"@firebase/auth\";\nimport { collection, getDocs, query, where } from \"@firebase/firestore\";\nimport { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Nweet from \"../components/Nweet\";\nimport { dbService } from \"../fbase\";\n\nconst Container = styled.div`\n  height: 100%;\n  min-height: 82vh;\n  border: 1px solid;\n  border-radius: 8px;\n  padding: 5px;\n  form {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 30px;\n    div {\n      display: flex;\n      justify-content: space-between;\n      gap: 20px;\n      input {\n        width: 50%;\n      }\n    }\n    label {\n      margin-right: 10px;\n    }\n    input:not(:last-child) {\n      border: none;\n      box-shadow: 0 0 4px;\n      padding: 0 7px;\n    }\n  }\n`;\nconst MyNweet = styled.div`\n  display: flex;\n  flex-direction: column;\n  h5 {\n    width: 100%;\n    text-align: center;\n    margin-bottom: 18px;\n  }\n`;\n\nconst Profile = ({ userObj, refreshUser }) => {\n  const [newDisplayName, setNewDisplayName] = useState(userObj.displayName);\n  const [myNweets, setMyNweets] = useState();\n\n  const onChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setNewDisplayName(value);\n  };\n  const onSubmit = async (event) => {\n    event.preventDefault();\n    if (userObj.displayName !== newDisplayName) {\n      await updateProfile(userObj, { displayName: newDisplayName });\n    }\n    refreshUser();\n  };\n\n  const getMyNweets = async () => {\n    const q = query(\n      collection(dbService, \"nweets\"),\n      where(\"creatorId\", \"==\", userObj.uid)\n    );\n\n    const querySnapshot = await getDocs(q);\n    let newArray = [];\n    querySnapshot.forEach((doc) => {\n      return newArray.push(doc.data());\n    });\n    setMyNweets(newArray);\n  };\n  useEffect(() => {\n    getMyNweets();\n  }, []);\n\n  return (\n    <Container>\n      <form onSubmit={onSubmit}>\n        <label>Nickname</label>\n        <div>\n          <input\n            onChange={onChange}\n            type=\"text\"\n            placeholder=\"Display name\"\n            value={newDisplayName}\n          />\n          <input type=\"submit\" value=\"Update Profile\" />\n        </div>\n      </form>\n      <MyNweet>\n        <h5>My Nweets</h5>\n        {myNweets?.map((nweet) => (\n          <Nweet\n            key={nweet.createdAt}\n            nweetObj={nweet}\n            isOwner={nweet.creatorId === userObj.uid}\n          />\n        ))}\n      </MyNweet>\n    </Container>\n  );\n};\n\nexport default Profile;\n","import { Link } from \"react-router-dom\";\nimport { useHistory } from \"react-router\";\nimport styled from \"styled-components\";\nimport { authService } from \"../fbase\";\n\nconst Nav = styled.nav`\n  display: flex;\n  background-color: white;\n  margin-top: 10px;\n  margin-bottom: 10px;\n  width: 100%;\n  border-radius: 8px;\n`;\nconst Ul = styled.ul`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  width: 100%;\n  a,\n  button {\n    border: 1px solid;\n    border-radius: 8px;\n    padding: 4px 8px;\n  }\n`;\nconst Li = styled.li`\n  display: flex;\n  align-items: center;\n  :last-child {\n    & :last-child {\n      margin-left: 12px;\n    }\n  }\n`;\n\nconst Navigation = ({ userObj }) => {\n  const history = useHistory();\n  const onLogOutClick = () => {\n    authService.signOut();\n    history.push(\"/\");\n  };\n  return (\n    <Nav>\n      <Ul>\n        <Li>\n          <Link to=\"/profile\">\n            {userObj?.displayName\n              ? `${userObj.displayName}'s Profile`\n              : \"My Profile\"}\n          </Link>\n        </Li>\n        <Li>\n          <Link to=\"/\">Home</Link>\n          <button onClick={onLogOutClick}>Log out</button>\n        </Li>\n      </Ul>\n    </Nav>\n  );\n};\nexport default Navigation;\n","import { HashRouter as Router, Route, Switch } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport Auth from \"../routes/Auth\";\nimport Home from \"../routes/Home\";\nimport Profile from \"../routes/Profile\";\nimport Navigation from \"./Navigation\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  max-width: 375px;\n  height: 100vh;\n  margin: auto;\n`;\nconst Main = styled.main``;\n\nconst AppRouter = ({ isLoggedIn, userObj, refreshUser }) => {\n  return (\n    <Container>\n      <Router>\n        {isLoggedIn && <Navigation userObj={userObj} />}\n        <Switch>\n          {isLoggedIn ? (\n            <>\n              <Route exact path=\"/\">\n                <Main>\n                  <Home userObj={userObj} />\n                </Main>\n              </Route>\n              <Route path=\"/profile\">\n                <Main>\n                  <Profile refreshUser={refreshUser} userObj={userObj} />\n                </Main>\n              </Route>\n            </>\n          ) : (\n            <Route exact path=\"/\">\n              <Main>\n                <Auth />\n              </Main>\n            </Route>\n          )}\n        </Switch>\n      </Router>\n    </Container>\n  );\n};\n\nexport default AppRouter;\n","import { useEffect, useState } from \"react\";\nimport AppRouter from \"./Router\";\nimport { authService } from \"../fbase\";\n\nfunction App() {\n  const [init, setInit] = useState(false);\n  const [isLoggedIn, setIsLoggedIn] = useState(authService.currentUser);\n  const [userObj, setUserObject] = useState(null);\n  useEffect(() => {\n    authService.onAuthStateChanged((user) => {\n      if (user) {\n        setIsLoggedIn(true);\n        setUserObject(user);\n      } else {\n        setIsLoggedIn(false);\n        setUserObject(null);\n      }\n      setInit(true);\n    });\n  }, []);\n  const refreshUser = () => {\n    const user = authService.currentUser;\n    setUserObject({ ...user });\n    setUserObject(user);\n  };\n\n  return (\n    <>\n      {init ? (\n        <AppRouter\n          refreshUser={refreshUser}\n          isLoggedIn={isLoggedIn}\n          userObj={userObj}\n        />\n      ) : (\n        \"Initializing...\"\n      )}\n    </>\n  );\n}\n\nexport default App;\n","import { createGlobalStyle } from \"styled-components\";\nimport reset from \"styled-reset\";\n\nconst GlobalStyle = createGlobalStyle`\n${reset}\n*{\n    box-sizing: border-box;\n}\nbody{\n    /* background-color: #bdc3c7; */\n}\ninput, button{\n    border:solid 1px;\n    border-radius: 8px;\n    background-color: white;\n}\nbutton{\n    cursor:pointer;\n}\na{\n    color:black;\n    text-decoration: none;\n}\n`;\n\nexport default GlobalStyle;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport GlobalStyle from \"./styles/GlobalStyle\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <GlobalStyle />\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}